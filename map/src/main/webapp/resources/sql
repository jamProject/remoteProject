CREATE TABLE USERINFO(
    ID VARCHAR2(30) PRIMARY KEY,
    EMAIL VARCHAR2(50) NOT NULL,
    PASS VARCHAR2(30),
    ISADMIN VARCHAR2(10),
    SIGNDATE DATE,
    NATION VARCHAR2(20),
    GENDER VARCHAR2(5),
    AGE NUMBER,
    IMAGE VARCHAR2(100)
) ;

CREATE TABLE PLANMAP(
PLANDATE VARCHAR2(20) NOT NULL,
PLANNO NUMBER NOT NULL,
ID VARCHAR2(50),
PICKCOUNT NUMBER DEFAULT 0,
USERCOLOR VARCHAR2(50),
PLACENAME VARCHAR2(200),
LAT NUMBER,
LNG NUMBER,
ADDRESS VARCHAR2(200),
CONFIRM NUMBER DEFAULT 0
);

--dml작업이후에 commit!!!!!!!!!!!!!!!!!!!
DROP TABLE PLANMAP; 
select * from planmap;
delete from planmap where id='jieun';
commit;

--getAllPickList
select  placeName, max(pickCount) as pickCount, max(lat) as lat, max(lng) as lng, address, max(confirm) as confirm
from planMap	
where planNo = 1
and planDate = '1월18일'
group by placeName, address
order by pickCount desc;

--getPickList
select * 
from planMap 
where planNo = 1
and planDate = '1월18일'
and placeName = 'encore';      
    
--checkPick:    
select count(*) 
from planMap 
where planNo=1
and planDate = '1월19일'
and	id='jieun'
and placeName='encore';
    
--insertMember
insert into planMap values
    ('1월20일',1,'jieun',1,'blue','encore2',-33.87949247753603,	151.2068322300911, '447 Pitt St Haymarket',1);

--deleteMember
delete from planMap 
where planNo=1
and planDate = '1월20일'
and id='jieun' 
and placeName='encore2';
      
--pickCount       
select count(*) 
from planMap 
where planNo=1 
and planDate = '1월19일'
and placeName='encore'; 
        
--updatePickCount      
update planMap set pickCount=2 
where planNo=1 
and planDate = '1월19일'
and placeName='encore'; 

--confirmPlace
update planMap set confirm=
    case
        when placeName in
        'encore'
            then 1
        else 0
    end
where planNo=1 
and planDate = '1월18일';

--resetPlace
update planMap set confirm=0
where planNo = 1
and planDate = '1월18일';
